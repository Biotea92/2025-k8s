## 배포 전 고려사항

### CI/CD 파이프라인 고려 사항
- 관리 담당 
    - 업무 분장
    - 관리 책임
- 운영 정책
    - 관리 편의
    - 장애 영향도
- 제품 선정
    - 데이터 보안
    - 레퍼런스
    - 유지보수 업체 

### CI/CD 툴
- CI/CD Tool
    - GitHub Actions, Jenkins, JenkinsX, TEKTON
- CI Tool
    - Travis CI, Circleci, GitLab
- CD Tool
    - argo, spinnaker
- 컨테이너 빌드
    - docker, kaniko
- 그외
    - podman, skopeo, openshift

### 배포 전략

#### `Recreate` 

구조  
1. 기존 v1 pod 전부 제거
2. 새로운 v2 pod 생성 및 배포

유의사항  
- Service에 연결된 pod가 모두 삭제되기 때문에 다운타임 발생
- 배포 중에 사용자 요청이 실패할 수 있음 

유즈케이스  
- DB 스키마가 변경되어 구버전(v1)과 호환이 불가능한 경우
- 무조건 중단 후 교체가 필요한 경우

특징  
- 단순한 방식
- 자동화 쉬움
- 롤백도 쉬움(수동)

#### `RollingUpdate`

구조  
1. v1 Pod을 순차적으로 하나씩 종료
2. 동시에 v2 Pod을 하나씩 생성하여 교체
3. 전체 교체가 완료되면 v1 제거

유의사항  
- v1과 v2가 동시에 실행되므로 호환성 보장 필요
- 롤백도 자동으로 가능 (특정 시점으로 되돌릴 수 있음)

유즈케이스  
- 점진적인 배포가 필요한 대부분의 일반 서비스

특징  
- 무중단 배포 가능
- 배포 실패 시 자동 롤백
- 트래픽 제어는 불가능

#### `Blue/Green`

구조  
1. v2 전체 Pod, Service 등 생성 (v1은 그대로 유지)
2. 배포 완료 후 Service Selector만 v2로 전환(트래픽 전환)
3. 검증 후 v1 제거

유의사항   
- 리소스를 이중으로 사용 (v1과 v2 동시 운영)

유즈케이스  
- 배포 전 충분한 사전 검증이 필요한 서비스
- 버전 간 동시 비교나 QA가 필요한 경우

특징  
- 수동 롤백 용이
- Script 통해 자동 배포 가능
- v2에 과도한 트래픽 유입시 문제 발생

#### `Canary`

구조  
1. 전체 중 일부 트래픽만 v2로 유입되게 Ingress에 설정 (예: 90% v1, 10% v2)
2. 문제 없을 경우 점진적으로 v2 비율 증가
3. 최종 전환 후 v1 제거

유의사항  
- 트래픽 분산을 위한 Ingress Controller 또는 서비스 메쉬 필요 (ex. Istio, Nginx)
- 조건부 트래픽 유입 가능 (IP, Header 기반 등)

유즈케이스  
- 운영 환경에서 실 사용자 기반 A/B 테스트가 필요한 경우
- 실시간 서비스에서 배포 위험을 줄이고 싶을 때

특징  
- 콜드 스타트 방지, 두버전 비교 가능
- 정교한 트래픽 제어 가능
- 롤백이 빠르고 유연함
- 설정 복잡도 있음
